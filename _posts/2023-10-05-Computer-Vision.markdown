---
layout: post
title: Computer Vision
date: 2023-10-5 1:11:00 +0300
description: This is the content of the curriculumn "Intro to Computer Vision" at Software Faulty in Tongji Univ, which is taught by Prof. Lin Zhang. # Add post description (optional)
img: camera_calibration.jpg # Add image post (optional)
fig-caption: # Add figcaption (optional)
tags: [CV, Image Stitching, Monocular Measurement, Bird's Eye View Generation]
comments: true
---

Traditional CV, mathematics more than deep learning

<!-- more -->

# 图像拼接问题


## 齐次坐标：
(这里的齐次坐标概念是在老师讲射影几何之前我自己对齐次坐标的理解)

欧氏空间中两条平行线不能相交，但它们在投影空间中是相交的，但我们用欧氏空间中的欧氏坐标没办法表达两条平行线在投影空间中相交的性质。怎么办？我们发明了齐次坐标。我认为，齐次坐标是用来表示欧氏空间中坐标的另一种方法，齐次坐标有以下几点好处：1. 齐次坐标兼容了欧氏坐标原有的性质；2.欧氏空间的欧氏坐标表示法不能用于证明两条平行线在投影空间相交，但齐次坐标能；3.齐次坐标能表达无穷远点的方向，例如(a,b,0)，而欧氏空间无穷远点只能是(inf,inf)。所以——齐次坐标是一个好工具。

每个欧氏坐标(x/w,y/w)有无穷多个齐次坐标(x,y,w)，但只有一个<span style="color:red;">规范化齐次坐标(x/w,y/w,1)</span>。不论是规范化还是非规范化的齐次坐标，都能唯一表示一个欧氏坐标。所以说，对于齐次坐标而言，x=kx,k!=0。

需要注意的是，欧氏空间中的点(不论是不是用齐次坐标表示)，分为两种：正常点；无穷远点。无穷远点没有规范化齐次坐标。

## 射影几何：
老师在讲完畸变镜头成像模型后开始讲这个的，我也不知道他讲射影几何是干什么用，我猜是为了引出齐次坐标吧，齐次坐标在处理成像原理、实现单目测量应该很有帮助。

首先要了解点积、叉积(即是求某个长度的法向量。有个行列式形式的公式比较好用，且容易用来推广运算混合积)、混合积(axb*c，代表求平行六面体体积)。

首先了解射影平面。

我们熟知的欧氏平面有两个限制，1.它没有无穷远点的概念；2.两个平行线不可能相交。

数学家们为了证明在某种条件，或者说，在某种概念下，两条平行线是有可能相交的，就引入了1.无穷远点，继而证明了2.两条平行线相交。这种被引入了无穷远点的欧氏平面即为射影平面。

那么，什么是无穷远点？我们首先要建立这样一个体系：假设欧氏平面pi0外有一点O，过O任一条直线与pi0上点一一对应，但实际上过O与欧氏平面平行的直线是不和pi0相交的，然后我们假设pi0上存在一组点，过O于pi0平行的直线与pi0在无穷远处相交于这组点，那么这组点就是无穷远点，过O任一条直线就与pi0上一点确实一一对应了。无穷远点怎么表示？本来，对于pi0上的普通点而言，每个点都对应于一条过O且与pi0相交的直线，若我们把O假设为离平面pi0距离为1，且O在3D空间中的坐标是(0,0,0)，其所在3D坐标系的x-y轴和pi0的x-y轴相同，pi0在O所在3D坐标系的z轴的(0,0,1)处。同时，过O的任一条直线由该直线方向所决定，即过O的直线方向对应于pi0上唯一一普通点——则，pi0上任一点可以表示为k*(xi,yi,1)，(xi,yi)表示该点在在pi0上的坐标，1表示它在O所在3D坐标系下的纵坐标，k可以取任意非0值，它的值无关紧要，它不改变直线的方向。k*(xi,yi,1)在表示过O直线的同时表示了pi0上的普通点，那么，k*(xi,yi,0)则表示过O且与pi0平行的直线，即对应了pi0上的无穷远点(再次强调有了无穷远点的欧氏平面就是射影平面了)。上述其实就是齐次坐标的由来，本身就是为了表示射影平面上引入的无穷远点k*(xi,yi,0)，从而推出平行线相交而生的。

由上面对射影平面上无穷远点的有趣定义和有趣表示，我们可以推导出，1.过O与pi0平行的直线与pi0上所有与该直线平行的直线交于同一个无穷远点(显而易见。假如相交于不同的无穷远点，则O上一直线对应于pi0上多于一个点，不一一对应，悖论。也符合两直线确定一点)；2.pi0上的两条平行直线交于无穷远点(由1推出，证明了两条平行线有可能相交的难题！)；3.一条pi0上的直线在无穷远处自己与自己交于一个无穷远点(无穷远点表示)，即射影平面上的直线实际上在射影平面上形成一个闭环；4.所有无穷远点构成一条无穷远直线(你可以这么理解，就是pi0上的直线与过O的平面一一对应，当过O平面是平行时，就对应了pi0上的无穷远直线)；5.若是齐次坐标x1和齐次坐标x2成比例，这它们表示的是同一个点。

<br>

下面我们将看到，射影平面上不仅点有齐次坐标，而且直线也有齐次坐标，两直线齐次坐标成比例同样说明这是同一条直线。
在欧氏平面上，两点确定一条直线，但由于没有无穷远点，所以不能说两条直线确定一点，但在射影平面上，两条直线确实确定一点。

但首先我们来分析射影平面上，由两点确定一条直线，如何推导出该条直线的方程，进而得出表示直线的齐次坐标。假设有x点和x’点，如图

<p align="center">
  <img src="{{site.baseurl}}/assets/img/2023-10-05-Computer-Vision/射影几何_1.png" alt="射影几何_1">
</p>

<!-- \$i={\sqrt[{n}]{\left({\frac {FV}{PV}}\right)}}-1\$

\\(i={\sqrt[{n}]{\left({\frac {FV}{PV}}\right)}}-1\\)  -->

\\[
i={\sqrt[{n}]{\left({\frac {FV}{PV}}\right)}}-1
\\]

\\[
\begin{vmatrix}
x & y & z \\
x_1 & y_1 & z_1 \\
x_2 & y_2 & z_2 \\
\end{vmatrix} = 0
\\]

<!-- \\[
\begin{matrix}
	1 & x & x^2 \\
	1 & y & y^2 \\
	1 & z & z^2 \\
\end{matrix}
\\] -->